# GammaScalping
Option Strategy for Futures. This is a event-driven strategy.The Basic concept as follows:
>1.Buy a staddle (LC + LP)                             
>2.Perfectly delta neutral                                                                 
>3.Underlying falls? Add long stock                                                            
>4.Underlying rises? Add short stock.

## **Project Overview**
This project is to replicate the trading strategy from a workshop and overcome the potential catastropic loss of Strategy 1 while a black swan event(like oil plunge in April 2020) occurs. 

### **[Strategy 1: Shorting Crude Oil Futures Option Straddle](FINAL_shortStrangle_Strategy1.m)**
Short a straddle on the day after the release date of a “US Weekly Petroleum Status Report,” and buy a cover just before the next release. 

Crude oil futures (symbol CL) on CME Globex expire around the 22th of every month ahead of the delivery month. For example, the February 2015 contract (denoted as CLG15) will cease trading on or around January 22, 2015. However, its options (symbol LO) expire three (3) business days ahead. Note that we trade only options on the front (nearest to expiration) futures contract, but at the same time we require the option to have a tenor (time‐to‐maturity) of about two weeks. The option expiration date is approximate only, and the first trading date of J12 and the last trading date of J13 are irregular due to the limitation of our data. Furthermore, there is no guarantee that this choice of tenor produces the optimal returns. The data are from Nanex.net.

As a straddle consists of one pair of an ATM put and call, we find out what strike price is ATM at the moment of the trade entry. Hence, we need to first retrieve the quotes data for the underlying CL futures contracts and determine the midprice at 9:00 a.m. Eastern Time on Thursdays. We have treated those holiday weeks when the releases were on Thursdays at 11:00 a.m. in the same way as the regular weeks. After finding the underlying future's midprice and thus the desired options strike price, we go on to retrieve the BBO (best bid offer) quotes data for the call and put with this strike price. We assume that quotes with the same time stamp are arranged in chronological order in the file; thus, we take only the last quote. Also, we cannot expect there is a new quote update at exactly the entry or exit time—we will take the quotes with the most recent time stamp just before entry or exit time as our execution prices. We have a choice of whether to enter into the short straddle position at the bid (using market orders), at the ask (using a limit order), or at midprice (also using a limit order). We can backtest all three alternatives. As for the buy cover exit, we use a market order to buy at the ask prices. While the P&L in points is computed here just by taking the differences between entry and exit prices (and multiplying that by −1 since this is a short position), we should remember that P&L in dollars is one thousand (1,000) times the points difference.

### **[Strategy 2: Gamma Scalping Crude Oil Futures](FINAL_Strategy2_gammaScalp_strangle_LO.m)**
We run a mean‐reversion strategy on an underlying, taking a long position in the underlying when its price moves lower or a short position when it moves higher. At the same time, we will long a straddle or strangle as a hedge. 

The profit of this strategy is usually from the short‐volatility, mean‐reverting strategy, while the long straddle merely provides a hedge against extreme movements and is typically a drag on profits. (Though the mean reversion part of the strategy is short volatility, at any moment the static portfolio has positive vega and negative theta.) At first glance, a long straddle combined with a long (or short) position in the underlying would seem to result in a portfolio that would have a delta of one (or minus one), thus fully exposed to the underlying's movement. (The straddle would be delta neutral, while the underlying of course has a delta of one or minus one.) But actually, we will put on the underlying's position only when there is a significant movement from the strike price of the options in the straddle. For example, if the underlying's price suddenly increases significantly, the put's delta will be almost zero (very much OTM), while the call's delta will be almost one (very much ITM), and entering into a short position in the underlying will render the portfolio almost delta‐neutral again. The change of the delta of the straddle per unit change in the underlying's price is its gamma; hence, this strategy is called gamma scalping, as we try to profit from the changing delta by entering and exiting the underlying's position as its price moves up and down. (Scalping is traders' parlance for market making or mean reversion trading.) The more positive the gamma of the straddle, the faster the delta changes, and the more scalping profit opportunities. Note that unlike the strategies already described, the profit of a gamma scalping strategy is path‐dependent. It depends not only on the initial and ending values of the underlying or the options, but on the exact path that the underlying took from the inception time to the liquidation time of the portfolio. The more often the underlying price oscillates around some mean value, the more profit we will generate. At the same time, unlike a typical mean reversion strategy as described in Chan (2013), the gamma scalping strategy does not have unlimited risk. For example, if we enter into a long position in the underlying, then if the price goes down further, the loss of the underlying will be offset by the gain in the put position almost exactly. Of course, if the price suddenly reverses and goes up, the gain of underlying will more than offset the loss due to the straddle as its delta returns to zero. This, of course, does not guarantee that a gamma scalping strategy will be profitable: If the underlying's price changes little, the mean reversion strategy will have nearly zero profit, while the time‐decay of the straddle's premium, together with the probable decrease in realized volatility (and positive vega), will generate negative P&L.

This strategy establishes a long straddle position at 9:00 a.m. ET on Thursday, and liquidates everything at 2:30 p.m. ET on Friday. The reason we pick the weekly trading period to be Thursday morning to Friday afternoon is that the main profit driver of this strategy is due to the mean reversion of the underlying future contract, not the long straddle or strangle. Hence, we want to pick a period that is most favorable to mean‐reversion—that is, it is devoid of expected announcements that might affect crude oil price. Also, we do not wish to hold positions over the weekend, which will incur negative theta without the compensating profits from mean reversion trading. The CL price at the inception of the straddle is used both as the strike price of the options, as well as the mean price level for the mean reversion strategy on the CL future. As CL goes up every 1 percent beyond this mean price, we will short one contract, up to a maximum of N contracts at a maximum deviation of N% from the mean. We will buy contracts in the same way if CL goes down every 1 percent instead of up, down to a maximum of −N contracts at −N% from the mean. When we enter into a new position in CL, we assume we are using a limit order to enter at the midprice, but if we exit an existing position, we will use a market order to exit at the market price

(as we did in the short straddle strategy before). N is a parameter to be optimized, as is the width of 1 percent between the levels. To hedge a maximum of N futures contracts, we will buy N straddles at inception time. With an arbitrarily chosen , the total annual P&L of this strategy is negative: The straddle lost a lot more than the mean reversion strategy was able to make. If we gamma‐scalp an LO strangle instead at 5 percent OTM, the annual P&L is $6,370, while the maximum drawdown is at $9,400. An improvement, though still not a great Calmar ratio. The 5 percent OTM strangle is chosen so that any loss in the underlying for a price deviation beyond 5 percent will be neutralized by one of the option positions. In other words, the maximum loss of the CL position is limited to 4 percent, or about $4,000 (assuming crude oil is worth $100 per barrel). The loss of the strangle will, of course, be limited to the initial premium. So we are assured that there cannot be extreme losses under any circumstances. A less arbitrary way to fix the separation between the limit price levels is to set it equal to the historical volatility of CL, as in the usual Bollinger band approach. Alternatively, these price levels can be spaced based on the delta of OTM options. For example, each leg of the strangle can be chosen to have a delta of 0.25. Then each price level can be set equal to the strike price of an option with delta at 0.45, 0.40, 0.35, 0.30, and 0.25. We can also try to impose a rule that the ratio of implied volatility to historical realized volatility must be below some threshold before we would enter into a position. This is naturally opposite to the rule proposed for improving the short LO straddle strategy discussed in the section “Event‐Driven Strategies.” You may wonder if this strategy will work on stocks as well, especially after an earnings announcement when the price has settled down to a new level. But there is an advantage of running a gamma scalping strategy on futures instead of stocks: Futures and their options are traded throughout the evening (in ET) during the trading week, whereas we cannot do any scalping on stocks or their options during those times.
